name: Scanner-virus

permissions:
  contents: read

on:
  schedule:
    - cron: '0 3 * * 0' # GMT time, 3:00 GMT == 3:00 China Every Sunday
#  push:
#    branches: [ "main" ]
#  pull_request:
#    branchs: [ main ]
  workflow_dispatch:

jobs:
  scan-virus:
    runs-on: [self-hosted, SDL]
    steps:
    - uses: actions/checkout@f43a0e5ff2bd294095638e18286ca9a3d1956744 # actions/checkout@v3
    - name: "virus-malware-scanning"
      run: |
        uvscan --RPTOBJECTS --RECURSIVE --UNZIP --HTML=scan-report.html --LOUD --SUMMARY --ANALYZE --PANALYZE .
